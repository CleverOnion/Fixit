# Fixit 产品需求文档 (PRD)

| 文档信息 | 内容 |
|---------|------|
| 产品名称 | Fixit |
| 文档版本 | v2.0 |
| 文档状态 | 正式发布 |
| 创建日期 | 2026-02-01 |
| 文档作者 | 产品团队 |
| 关联文档 | 技术方案设计文档 |

---

## 目录

1. [产品概述](#1-产品概述)
2. [产品目标与愿景](#2-产品目标与愿景)
3. [用户角色分析](#3-用户角色分析)
4. [功能需求规格](#4-功能需求规格)
5. [非功能性需求](#5-非功能性需求)
6. [系统架构设计指南](#6-系统架构设计指南)
7. [项目里程碑](#7-项目里程碑)
8. [附录](#8-附录)

---

## 1. 产品概述

### 1.1 产品简介

Fixit 是一款极简、灵活且数据驱动的 Web 端错题管理与复习工具。通过结构化数据和科学复习策略，帮助学生和自学者将"错题"转化为"掌握的知识点"。

### 1.2 产品定位

| 维度 | 描述 |
|-----|------|
| 产品类型 | 错题管理与复习工具 |
| 目标平台 | Web 端（响应式设计，支持移动端访问） |
| 目标用户 | 学生、自学者、需要大量刷题备考的人群 |
| 核心差异 | 低摩擦录入 + 智能标签系统 + 科学复习算法 |

### 1.3 核心功能模块

```
┌─────────────────────────────────────────────────────────────┐
│                      Fixit 产品架构                          │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │
│  │  录入中心   │  │  题库管理   │  │  复习训练   │          │
│  │  (Capture)  │  │  (Organize) │  │  (Practice) │          │
│  └─────────────┘  └─────────────┘  └─────────────┘          │
│         │              │              │                      │
│         └──────────────┼──────────────┘                      │
│                        │                                     │
│              ┌─────────▼─────────┐                          │
│              │    AI 智能引擎    │                          │
│              │  (智能标签/解析)  │                          │
│              └─────────▲─────────┘                          │
│                        │                                     │
│  ┌─────────────────────────────────────────────────────┐    │
│  │                    数据看板 (Insight)                 │    │
│  └─────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
```

---

## 2. 产品目标与愿景

### 2.1 业务目标

| 目标项 | 目标描述 | 衡量指标 |
|-------|---------|---------|
| 用户增长 | 吸引目标用户群体 | 注册用户数、月活跃用户数 |
| 留存率 | 提高用户持续使用率 | 7日留存率、30日留存率 |
| 核心价值 | 降低错题整理负担 | 用户平均录入时长 < 3分钟/题 |
| 学习效果 | 提升用户知识点掌握度 | 复习后掌握率提升 ≥ 30% |

### 2.2 用户价值主张

1. **低摩擦录入**：极简操作，3秒内完成一道错题的录入
2. **智能管理**：AI 自动识别和推荐标签，告别手动分类烦恼
3. **科学复习**：基于艾宾浩斯遗忘曲线，智能安排复习计划
4. **数据洞察**：可视化学习进度，了解自己的知识薄弱点

---

## 3. 用户角色分析

### 3.1 用户角色定义

| 角色名称 | 描述 | 核心需求 |
|---------|------|---------|
| 注册用户 | 已完成注册并登录的用户 | 完整使用所有功能 |
| 访客用户 | 未注册/未登录的用户 | 浏览公开内容、注册转化 |
| 管理员 | 系统运营管理人员 | 用户管理、内容审核、数据统计 |

### 3.2 用户画像

**主要用户画像：高中生/大学生**

- 年龄：15-25岁
- 场景：课后复习、考试备考、错题整理
- 痛点：
  - 纸质错题本携带不便、容易丢失
  - 手动整理耗时耗力
  - 复习没有计划性，容易遗忘
- 期望：快速记录、智能提醒、科学复习

---

## 4. 功能需求规格

### 4.1 模块一：录入中心 (Capture)

**模块目标**：解决"记下来"的问题，将录入阻力降到最低。

#### 4.1.1 富文本编辑器

| 需求编号 | FR-CAP-001 |
|---------|------------|
| 功能名称 | Markdown + LaTeX 编辑器 |
| 优先级 | P0 |
| 需求描述 | 支持 Markdown 语法编辑，支持 KaTeX/LaTeX 数学公式渲染，支持代码高亮 |
| 输入规格 | Markdown 文本、LaTeX 公式语法 |
| 输出规格 | 实时渲染的 HTML 预览 |
| 依赖组件 | KaTeX、Highlight.js/Prism.js |
| 验收标准 | 1. 支持常用 Markdown 语法（标题、列表、表格、代码块）<br>2. 支持行内公式 `$...$` 和块级公式 `$$...$$`<br>3. 支持代码语法高亮 |

#### 4.1.2 图片上传与标注

| 需求编号 | FR-CAP-002 |
|---------|------------|
| 功能名称 | 截图粘贴与标注 |
| 优先级 | P0 |
| 需求描述 | 支持 `Ctrl+V` 直接粘贴剪贴板图片，支持简单标注（红框、高亮） |
| 输入规格 | 剪贴板图片、拖拽上传图片 |
| 输出规格 | 存储的图片文件及标注信息 |
| 验收标准 | 1. 支持 Ctrl+V 粘贴截图<br>2. 支持拖拽上传图片<br>3. 提供简单的标注工具（矩形框、箭头、荧光笔） |

#### 4.1.3 题目与答案分离

| 需求编号 | FR-CAP-003 |
|---------|------------|
| 功能名称 | 题面/答案物理分离 |
| 优先级 | P0 |
| 需求描述 | 录入时题目内容与正确答案/解析分离存储，复习时默认隐藏答案 |
| 业务规则 | 录入时可预览全部内容；查看/复习时默认折叠答案区 |
| 验收标准 | 1. 题目区和答案区逻辑分离<br>2. 复习模式下默认隐藏答案<br>3. 用户可手动展开答案 |

#### 4.1.4 【新增】AI 智能导入

| 需求编号 | FR-CAP-004 |
|---------|------------|
| 功能名称 | AI 辅助题目导入 |
| 优先级 | P1 |
| 需求描述 | 通过 AI 能力辅助用户快速导入题目，AI 负责从图片中识别题目内容，答案和解析由用户手动输入或可选让 AI 生成 |

##### 4.1.4.1 AI 题目识别

| 子需求编号 | FR-CAP-004-01 |
|-----------|---------------|
| 功能描述 | 上传图片后，AI 自动识别并生成题目文本内容（基于多模态大模型） |
| 输入规格 | 图片文件（PNG/JPG/JPEG） |
| 输出规格 | 题目文本内容 |
| 验收标准 | 1. 识别准确率 ≥ 95%（印刷体）<br>2. 支持中英文混合识别<br>3. 识别时间 < 5秒（单张图片）<br>4. 只生成题目文本，不自动生成答案和解析 |

##### 4.1.4.2 AI 生成答案

| 子需求编号 | FR-CAP-004-02 |
|-----------|---------------|
| 功能描述 | 根据题目内容和用户指令，AI 生成答案 |
| 输入规格 | 题目内容 + 用户指令（可选，如"根据题目生成标准答案"） |
| 输出规格 | 答案文本 |
| 验收标准 | 1. 提供独立的答案输入框<br>2. 提供独立的 AI 指令输入框<br>3. 用户点击 AI 生成按钮后，AI 根据指令生成答案<br>4. 用户可编辑/覆盖 AI 生成的内容 |

##### 4.1.4.3 AI 生成解析

| 子需求编号 | FR-CAP-004-03 |
|-----------|---------------|
| 功能描述 | 根据题目内容和用户指令，AI 生成解析 |
| 输入规格 | 题目内容 + 用户指令（可选，如"给出详细解题步骤"） |
| 输出规格 | 解析文本 |
| 验收标准 | 1. 提供独立的解析输入框<br>2. 提供独立的 AI 指令输入框<br>3. 用户点击 AI 生成按钮后，AI 根据指令生成解析<br>4. 用户可编辑/覆盖 AI 生成的内容 |

##### 4.1.4.4 AI 导入界面原型

```
┌─────────────────────────────────────────────────────────────┐
│  AI 智能导入                              [返回] [帮助 ?]   │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  导入方式选择                                         │    │
│  │  ┌─────────┐ ┌─────────┐                            │    │
│  │  │ 📷      │ │ 📄      │                            │    │
│  │  │ 上传图片 │ │ 粘贴文本 │                            │    │
│  │  └─────────┘ └─────────┘                            │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  📷 图片预览                                          │    │
│  │  ┌──────────────────────────────────────────────┐   │    │
│  │  │           [图片预览区域]                      │   │    │
│  │  └──────────────────────────────────────────────┘   │    │
│  │                                           [重新识别] │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  📝 题目                                              │    │
│  │  ─────────────────────────────────────────────────  │    │
│  │  ┌──────────────────────────────────────────────┐   │    │
│  │  │ [题目输入框 - 支持 Markdown]                 │   │    │
│  │  └──────────────────────────────────────────────┘   │    │
│  │                                                      │    │
│  │  AI 指令：┌─────────────────────────────────────┐   │    │
│  │           │ [可选 - 给 AI 的具体要求...]        │   │    │
│  │           └─────────────────────────────────────┘   │    │
│  │                                        [🤖 AI生成] │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  📋 答案                                              │    │
│  │  ─────────────────────────────────────────────────  │    │
│  │  ┌──────────────────────────────────────────────┐   │    │
│  │  │ [答案输入框 - 支持 Markdown]                 │   │    │
│  │  └──────────────────────────────────────────────┘   │    │
│  │                                                      │    │
│  │  AI 指令：┌─────────────────────────────────────┐   │    │
│  │           │ [可选 - 例如：根据题目生成标准答案]  │   │    │
│  │           └─────────────────────────────────────┘   │    │
│  │                                        [🤖 AI生成] │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  📖 解析                                              │    │
│  │  ─────────────────────────────────────────────────  │    │
│  │  ┌──────────────────────────────────────────────┐   │    │
│  │  │ [解析输入框 - 支持 Markdown]                 │   │    │
│  │  └──────────────────────────────────────────────┘   │    │
│  │                                                      │    │
│  │  AI 指令：┌─────────────────────────────────────┐   │    │
│  │           │ [可选 - 例如：给出详细解题步骤]      │   │    │
│  │           └─────────────────────────────────────┘   │    │
│  │                                        [🤖 AI生成] │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                              │
│                    [💾 保存题目]                             │
└─────────────────────────────────────────────────────────────┘
```

##### 4.1.4.5 AI API 接口设计

```typescript
// AI 生成内容接口（题目/答案/解析共用）
interface AIGenerateRequest {
  target: 'question' | 'answer' | 'analysis';  // 生成目标类型
  imageBase64?: string;         // 图片（仅题目识别时需要）
  content?: string;             // 已有内容（用户输入的题目，用于生成答案/解析）
  instruction?: string;         // AI 指令（可选，如"根据题目生成标准答案"）
}

interface AIGenerateResponse {
  success: boolean;
  data: {
    content: string;            // AI 生成的内容
    confidence: number;         // 置信度 0-1
  };
  error?: string;
}
```

---

### 4.2 模块二：题库管理 (Organize)

**模块目标**：解决"存哪里、怎么找"的问题，通过灵活的标签系统管理错题。

#### 4.2.1 标签系统架构

| 标签类型 | 描述 | 示例 |
|---------|------|------|
| 系统预设标签 | 系统预定义的分类维度 | 学科、来源、掌握程度 |
| 自定义标签 | 用户自行创建的标签 | 题型、错误原因、重要性 |

#### 4.2.2 核心标签定义

##### 4.2.2.1 学科 (Subject)

| 需求编号 | FR-ORG-001 |
|---------|------------|
| 功能名称 | 学科分类 |
| 优先级 | P0 |
| 需求描述 | 对题目进行学科分类，支持单选 |
| 预置选项 | 数学、语文、英语、物理、化学、生物、政治、历史、地理 |
| 扩展性 | 用户可自定义添加学科 |

##### 4.2.2.2 来源 (Source)

| 需求编号 | FR-ORG-002 |
|---------|------------|
| 功能名称 | 来源层级标签 |
| 优先级 | P0 |
| 需求描述 | 支持层级化的来源标签（如：书籍 > 章节） |
| 数据结构 | 树形结构，支持多级嵌套 |
| 示例 | 五年高考三年模拟 > 第一章 > 集合 |

##### 4.2.2.3 掌握程度 (Mastery)

| 需求编号 | FR-ORG-003 |
|---------|------------|
| 功能名称 | 掌握程度评分 |
| 优先级 | P0 |
| 需求描述 | 0-5星评分，系统自动计算或用户手动打分 |
| 计算规则 | 基于复习次数和正确率自动调整 |
| 显示方式 | 星标显示 + 百分比 |

##### 4.2.2.4 自定义标签

| 需求编号 | FR-ORG-004 |
|---------|------------|
| 功能名称 | 自定义标签管理 |
| 优先级 | P1 |
| 需求描述 | 用户可创建任意标签组，支持批量打标签 |
| 标签组示例 | 题型、错误原因、重要性、难度 |

#### 4.2.3 题目列表

| 需求编号 | FR-ORG-005 |
|---------|------------|
| 功能名称 | 题目列表管理 |
| 优先级 | P0 |
| 需求描述 | 以卡片或列表形式展示题目，支持筛选和搜索 |
| 功能要求 | 1. 支持网格/列表视图切换<br>2. 支持多条件筛选（学科、标签、掌握程度）<br>3. 支持全文搜索<br>4. 支持批量操作（移动、删除、打标签） |

#### 4.2.4 题目详情

| 需求编号 | FR-ORG-006 |
|---------|------------|
| 功能名称 | 题目详情页 |
| 优先级 | P0 |
| 需求描述 | 查看题目完整信息，包括元数据和历史记录 |
| 页面元素 | 1. 元数据栏（标签展示）<br>2. 题目内容区（Markdown + LaTeX）<br>3. 答案/解析区（可折叠）<br>4. 复习历史时间轴 |

---

### 4.3 模块三：复习训练 (Practice)

**模块目标**：解决"怎么刷、记住了吗"的问题，提供沉浸式刷题体验。

#### 4.3.1 智能筛选器

| 需求编号 | FR-PRA-001 |
|---------|------------|
| 功能名称 | 题目筛选生成器 |
| 优先级 | P0 |
| 需求描述 | 基于元数据生成练习卷，支持多条件组合筛选 |
| 筛选维度 | 学科、来源、标签、掌握程度、复习状态 |
| 筛选逻辑 | 支持 AND/OR 组合条件 |

#### 4.3.2 沉浸式刷题模式

| 需求编号 | FR-PRA-002 |
|---------|------------|
| 功能名称 | Focus Mode 刷题界面 |
| 优先级 | P0 |
| 需求描述 | 极简全屏刷题界面，减少干扰 |
| 界面元素 | 1. 题目内容区<br>2. 答案折叠区<br>3. 状态按钮 |
| 快捷键 | `Space` 显示答案、`1` 忘记、`2` 模糊、`3` 掌握 |

#### 4.3.3 艾宾浩斯复习算法

| 需求编号 | FR-PRA-003 |
|---------|------------|
| 功能名称 | 智能复习提醒 |
| 优先级 | P1 |
| 需求描述 | 基于遗忘曲线算法，智能安排复习计划 |
| 算法参数 | 1. 初始间隔：1天<br>2. 间隔递增：2x<br>3. 正确率影响：+20%/-50%间隔 |

#### 4.3.4 刷题记录

| 需求编号 | FR-PRA-004 |
|---------|------------|
| 功能名称 | 复习日志 |
| 优先级 | P1 |
| 需求描述 | 记录每次复习的详细信息 |
| 记录内容 | 时间、操作（忘记/模糊/掌握）、心得备注 |

---

### 4.4 模块四：数据看板 (Insight)

**模块目标**：解决"进度如何"的问题，提供数据可视化和洞察。

#### 4.4.1 数据统计面板

| 需求编号 | FR-INS-001 |
|---------|------------|
| 功能名称 | 数据概览 |
| 优先级 | P1 |
| 需求描述 | 展示核心学习数据 |
| 统计指标 | 1. 总题数、本周新增<br>2. 已掌握/模糊/未掌握分布<br>3. 本周刷题数量<br>4. 连续学习天数 |

#### 4.4.2 热力图

| 需求编号 | FR-INS-002 |
|---------|------------|
| 功能名称 | 学习热力图 |
| 优先级 | P1 |
| 需求描述 | 类似 GitHub 提交热力图，展示刷题活跃度 |
| 展示周期 | 最近365天 |

#### 4.4.3 掌握度分布

| 需求编号 | FR-INS-003 |
|---------|------------|
| 功能名称 | 掌握度饼图 |
| 优先级 | P2 |
| 需求描述 | 展示各掌握程度题目的分布情况 |
| 数据维度 | 按学科、按标签分别统计 |

---

## 5. 非功能性需求

### 5.1 性能需求

| 需求编号 | NFR-PERF-001 |
|---------|--------------|
| 页面加载时间 | 首屏加载 < 2秒 |
| API 响应时间 | 普通查询 < 500ms，复杂查询 < 2秒 |
| 图片加载 | 懒加载，单张图片 < 1秒 |
| 并发用户 | 支持 1000+ 同时在线 |

### 5.2 可靠性需求

| 需求编号 | NFR-REL-001 |
|---------|--------------|
| 可用性 | 系统可用性 ≥ 99.5% |
| 数据备份 | 每日自动备份，保留30天 |
| 错误处理 | 优雅降级，用户操作有明确反馈 |

### 5.3 安全需求

| 需求编号 | NFR-SEC-001 |
|---------|--------------|
| 用户认证 | JWT Token 认证，支持 Token 刷新 |
| 数据传输 | 全站 HTTPS 加密 |
| 敏感数据 | 图片、文件存储采用私有权限 |
| XSS 防护 | 输入内容转义，图片独立域名 |

### 5.4 兼容性需求

| 需求编号 | NFR-COMP-001 |
|---------|--------------|
| 浏览器支持 | Chrome、Firefox、Safari、Edge 最新两个版本 |
| 响应式设计 | 支持 320px - 1920px 屏幕宽度 |
| 移动端 | 支持手机、平板访问（功能可降级） |

### 5.5 可用性需求

| 需求编号 | NFR-USE-001 |
|---------|--------------|
| 录入效率 | 单题录入 < 30秒（不含思考时间） |
| 学习成本 | 新用户5分钟内理解核心功能 |
| 操作反馈 | 所有操作500ms内反馈 |

---

## 6. 系统架构设计指南

### 6.1 推荐技术栈

| 层级 | 推荐技术 | 说明 |
|-----|---------|------|
| 前端框架 | React / Vue 3 | 组件化开发 |
| UI 组件库 | Ant Design / Element Plus | 成熟稳定 |
| 状态管理 | Redux / Vuex / Pinia | 全局状态 |
| Markdown 渲染 | React-Markdown / Vue-Markdown | + KaTeX |
| 后端框架 | Node.js (NestJS) / Python (FastAPI) | 轻量高效 |
| 数据库 | PostgreSQL / MongoDB | 结构化/灵活存储 |
| 文件存储 | 对象存储 (S3 兼容) | 图片文件 |
| AI 服务 | OpenAI GPT-4o / Claude 3 (多模态) | 图片识别 + 智能标签 |

### 6.2 数据模型设计指南

#### 6.2.1 题目表 (Questions)

```typescript
interface Question {
  id: string;              // 主键
  content: string;         // 题目内容 (Markdown)
  answer: string;          // 答案 (Markdown)
  analysis?: string;       // 解析 (Markdown)
  images: string[];        // 图片URL列表
  subject: string;         // 学科
  sourcePath: string;      // 来源路径 (JSON)
  masteryLevel: number;    // 掌握程度 (0-5)
  tags: QuestionTag[];     // 标签
  createdAt: Date;         // 创建时间
  updatedAt: Date;         // 更新时间
  userId: string;          // 用户ID

#### 6.2.2 标签表 (Tags)

```typescript
interface Tag {
  id: string;
  name: string;
  type: 'system' | 'custom';
  category: string;        // 标签类别 (题型、错误原因等)
  color?: string;          // 展示颜色
  userId: string;

#### 6.2.3 复习记录表 (ReviewLogs)

```typescript
interface ReviewLog {
  id: string;
  questionId: string;
  userId: string;
  status: 'forgotten' | 'fuzzy' | 'mastered';
  note?: string;           // 复习心得
  createdAt: Date;

### 6.3 API 设计规范

| 规范项 | 要求 |
|-------|------|
| RESTful | 遵循 RESTful 设计原则 |
| 认证方式 | Bearer Token (JWT) |
| 错误响应 | 统一错误码和消息格式 |
| 分页 | 页码 + 每页数量 或 游标方式 |
| 版本管理 | URL 版本号 (如 /api/v1/) |

---

## 7. 项目里程碑

### 7.1 MVP (最小可行性产品) 阶段

| 阶段 | 时间 | 交付物 | 核心功能 |
|-----|------|-------|---------|
| Phase 1 | 第1-4周 | 核心闭环 | 1. 富文本编辑器<br>2. 题目录入（不含AI）<br>3. 标签系统<br>4. 题目列表<br>5. 题目详情 |
| Phase 2 | 第5-8周 | 复习增强 | 1. 筛选器<br>2. 刷题模式<br>3. 掌握程度流转<br>4. 复习记录 |
| Phase 3 | 第9-12周 | 智能与数据 | 1. AI 智能导入<br>2. 数据看板<br>3. 艾宾浩斯算法 |

### 7.2 迭代规划

| 版本 | 计划时间 | 主要特性 |
|-----|---------|---------|
| v1.0 | 第12周 | MVP 完成 |
| v1.1 | 第16周 | 批量导入优化、AI准确率提升 |
| v2.0 | 第24周 | 移动端适配、分享功能 |

---

## 8. 附录

### 8.1 术语表

| 术语 | 定义 |
|-----|------|
| 错题本 | 用户记录的做错的题目集合 |
| 掌握程度 | 用户对某道题的掌握状态 (0-5星) |
| 艾宾浩斯曲线 | 描述遗忘规律的曲线，用于计算最佳复习时间 |
| 多模态模型 | 能够同时处理文本和图像的 AI 模型（如 GPT-4o、Claude 3） |

### 8.2 参考资料

| 名称 | 链接 |
|-----|------|
| Markdown 语法 | https://www.markdownguide.org/ |
| KaTeX 公式渲染 | https://katex.org/ |
| 艾宾浩斯遗忘曲线 | https://en.wikipedia.org/wiki/Forgetting_curve |

### 8.3 修订历史

| 版本 | 日期 | 修订人 | 修订内容 |
|-----|------|-------|---------|
| v1.0 | - | - | 初始版本 |
| v2.0 | 2026-02-01 | 产品团队 | 规范化文档结构，新增AI智能导入功能 |
